<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">lib/test.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/jrop/pratt" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/index.js~Parser.html">Parser</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/index.js~ParserBuilder.html">ParserBuilder</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ILexer">ILexer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-IToken">IToken</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-LedFunction">LedFunction</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-NudFunction">NudFunction</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">lib/test.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import * as assert from &apos;assert&apos;;
import * as perplex from &apos;perplex&apos;;
import { Parser } from &apos;./index&apos;;
const lex = perplex(&apos;&apos;)
    .token(&apos;NUM&apos;, /\d+/)
    .token(&apos;+&apos;, /\+/)
    .token(&apos;-&apos;, /-/)
    .token(&apos;*&apos;, /\*/)
    .token(&apos;/&apos;, /\//)
    .token(&apos;^&apos;, /\^/)
    .token(&apos;(&apos;, /\(/)
    .token(&apos;)&apos;, /\)/)
    .token(&apos;WS&apos;, /\s+/, true);
const parser = new Parser(lex)
    .builder()
    .bp(&apos;EOF&apos;, -1)
    .nud(&apos;NUM&apos;, 100, t =&gt; parseInt(t.match))
    .nud(&apos;(&apos;, 10, (t, bp) =&gt; {
    const expr = parser.parse(bp);
    lex.expect(&apos;)&apos;);
    return expr;
})
    .bp(&apos;)&apos;, 0)
    .led(&apos;^&apos;, 20, (left, t, bp) =&gt; Math.pow(left, parser.parse(bp - 1)))
    .led(&apos;+&apos;, 30, (left, t, bp) =&gt; left + parser.parse(bp))
    .either(&apos;-&apos;, 30, (left, t, bp) =&gt; (left || 0) - parser.parse(bp))
    .led(&apos;*&apos;, 40, (left, t, bp) =&gt; left * parser.parse(bp))
    .led(&apos;/&apos;, 40, (left, t, bp) =&gt; left / parser.parse(bp))
    .build();
function evaluate(s) {
    lex.source = s;
    return parser.parse();
}
assert.equal(evaluate(&apos;1 + 2 * (3 + 1) * 3&apos;), 25);
assert.equal(evaluate(&apos;1^2^3&apos;), 1);
assert.equal(evaluate(&apos;(1/2)^-1&apos;), 2);
assert.equal(evaluate(&apos;4^3^2^1&apos;), Math.pow(4, 9));
assert.equal(evaluate(&apos;-1-3&apos;), -4);
assert.equal(evaluate(&apos;2*-3&apos;), -6);
assert.equal(evaluate(&apos;-2*3&apos;), -6);
assert.throws(() =&gt; evaluate(&apos;1+ +&apos;), /Unexpected token: \+ \(at 1:4\)/);
console.log(&apos;All tests passed&apos;);
//# sourceMappingURL=test.js.map</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.2)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
